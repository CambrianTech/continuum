[tool:pytest]
# PyTest configuration for Continuum unified test structure

# Test discovery
testpaths = .
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Output formatting
addopts = 
    --strict-markers
    --strict-config
    --verbosity=2
    --tb=short
    --show-capture=no
    --durations=10
    --rootdir=..

# Test markers for functional grouping
markers =
    unit: Unit tests for individual components
    integration: Integration tests across components/systems
    functional: Feature-complete functional tests
    comprehensive: Full system integration tests
    critical: Critical path tests that must pass
    screenshot: Screenshot functionality tests
    websocket: WebSocket communication tests
    commands: Command system tests
    ui: User interface tests
    api: API integration tests
    workflows: End-to-end workflow tests
    visual: Visual testing
    user_scenarios: User scenario tests
    slow: Slow tests that take >5 seconds
    fred_agent: Fred agent specific tests
    promise_flow: Promise-based execution flow tests
    crash_recovery: Server crash and recovery tests
    html_parsing: HTML parsing and DOM tests
    
# Async support
asyncio_mode = auto

# Coverage settings (when using --cov)
[coverage:run]
source = 
    ../src
    ../python-client/continuum_client
omit = 
    */tests/*
    */test_*
    */__tests__/*
    */conftest.py
    */setup.py
    */node_modules/*

[coverage:report]  
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    
[coverage:html]
directory = ../coverage/python-html

# Test collection configuration
collect_ignore_glob = 
    ../node_modules/**
    ../dist/**
    ../coverage/**