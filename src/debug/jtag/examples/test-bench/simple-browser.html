<!DOCTYPE html>
<html>
<head>
    <title>Simple Browser App with JTAG</title>
</head>
<body>
    <h1>Simple Browser App</h1>
    <button onclick="takeScreenshot()">Take Screenshot</button>
    <button onclick="runTest()">Run Test</button>
    
    <script type="module">
        // ONE LINE - that's it! Console auto-attached, full API available
        import { jtag } from '../index.js';
        
        // Console automatically logged to server files
        console.log('Browser app loaded!');
        console.error('Test browser error');
        
        // Use JTAG API directly when needed
        jtag.critical('BROWSER_APP', 'Page loaded', { url: window.location.href });
        
        // Make API available globally for button clicks
        window.jtag = jtag;
        
        // Normal app logic
        setInterval(() => {
            console.log('Browser heartbeat:', new Date().toISOString());
        }, 10000);
    </script>
    
    <script>
        // Your normal app functions
        async function takeScreenshot() {
            const result = await window.jtag.screenshot('browser-screenshot.png');
            if (result.success) {
                console.log('Screenshot saved:', result.filename);
            } else {
                console.error('Screenshot failed:', result.error);
            }
        }
        
        async function runTest() {
            console.log('Running browser test...');
            
            const execResult = await window.jtag.exec('Math.PI * window.innerWidth');
            console.log('Exec result:', execResult.result);
            
            window.jtag.log('BROWSER_TEST', 'Test completed', { 
                result: execResult.result,
                executionTime: execResult.executionTime 
            });
        }
    </script>
</body>
</html>