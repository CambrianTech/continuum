#!/bin/bash
# JTAG Terminal Portal - Ensures system is running and connects CLI

# Use smart system startup script for consistent behavior
if [[ "$*" == *"--restart"* ]]; then
  echo "ğŸ”„ Restart requested..."
  npx tsx scripts/smart-system-startup.ts --force
else
  echo "ğŸ” Ensuring JTAG system is running..."
  npx tsx scripts/smart-system-startup.ts
fi

# Check if startup was successful
if [ $? -eq 0 ]; then
  echo "âœ… JTAG system ready"
  # Forward all args to CLI
  npx tsx cli.ts "$@"
else
  echo "âŒ Failed to start JTAG system"
  exit 1
fi