ğŸ—„ï¸ DATABASE CHAT INTEGRATION TEST
=================================
ğŸ”— Connecting to JTAG system...
ğŸ”Œ Server: Connecting via JTAGClientServer (target: server)
ğŸ”„ JTAGClient: Connecting to server system with secure configuration...
ğŸ¯ JTAGClient: Provided sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de
ğŸŒ JTAGClientServer: No local system - using remote connection
ğŸ”— JTAGClient: Using Connection Broker for intelligent connection management
ğŸ”§ JTAGClient: Connection with sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de (provided: deadbeef-cafe-4bad-8ace-5e551000c0de, current: deadbeef-cafe-4bad-8ace-5e551000c0de)
ğŸ”— ConnectionBroker: Processing connection request for server (mode: preferred)
ğŸ”— ConnectionBroker: Creating client connection to existing server
ğŸ“‹ ConnectionBroker: Registered server existing-jtag-server-9002 (03cb2919-eb3e-43f2-a423-a6bd0d57d89a) on port 9002
ğŸ­ Server Transport Factory (Registry-Based): Creating websocket transport for server environment
ğŸ” Server Factory: Looking for websocket transport (role: client) in registry
âœ… Server Factory: Found adapter WebSocketTransportClientServer for websocket/client
ğŸ”— websocket-server-client: Connecting to ws://localhost:9002
âœ… websocket-server-client: Connected
âœ… websocket-server-client: Handler compliance enforced by TypeScript
ğŸš€ Server Factory: Adapter WebSocketTransportClientServer connected successfully
âœ… Server Transport Factory (Registry-Based): web-socket-transport-client-server transport created successfully
âœ… JTAGClient: created_new connection established on port 9002
ğŸ·ï¸ JTAGClient: Requesting session from SessionDaemon...
ğŸ”„ JTAGClient: Using provided sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de
ğŸ” JTAGClient: Detected category=user, displayName=CLI Client, isAgent=undefined
ğŸ”‘ JTAGClient: Computed uniqueId="cli" for CLI Client (isEphemeralClient=true, isAgent=undefined)
ğŸ“¤ RemoteConnection: Sending command 'session/create' with correlation client_1765756084738_guxw35c8
ğŸ·ï¸ JTAGClientServer: Session updated to: b8e81836-cdcb-4454-a941-84087320bffb (managed by base class)
ğŸ“‹ JTAGClient: Discovering available commands...
ğŸ“¤ RemoteConnection: Sending command 'list' with correlation client_1765756084743_t3i52iyg
âœ… JTAGClient: Connection established
ğŸ”„ JTAGClient: Discovering available commands...
ğŸ“¤ RemoteConnection: Sending command 'list' with correlation client_1765756084744_jxmummax
âœ… Server: JTAGClient connected with 143 commands
âœ… Connected

ğŸ§¹ Cleaning up orphaned test data from previous runs...
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765756084746_63ttes7s
  âœ… No orphaned test users found
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765756084750_llvdopis
  âœ… No orphaned test rooms found
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765756084759_9vv6rr55
  âœ… No orphaned test messages found
âœ… Cleanup complete

â³ Waiting for widgets to initialize...
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756092545_mz9j4t8u
âœ… Widget user-list-widget initialized
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756092550_w0krrcfu
âœ… Widget room-list-widget initialized
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756092553_cru2dhco
âœ… Widget chat-widget initialized

ğŸ§ª CRUD TEST: users â†’ user-list-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756094557_00b6zz8d
  ğŸ¨ Widget: âœ… Widget working (16 entities)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765756094560_1k91hk6e
  ğŸ“¸ Screenshot: user-before.png
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765756095811_vgy7tyik
âœ… CREATE: 1765756095811-l70sr0tf0

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765756097827_r6br9jaa
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756097828_wy54lxms
  ğŸ¨ Widget: âœ… Entity 1765756095811-l70sr0tf0 found in widget (17 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765756097833_ns2nndgj
  ğŸ“¸ Screenshot: user-create.png
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765756098966_vhgzr0uy
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765756100978_2w0pbphl
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756100979_c05pmecg
  ğŸ¨ Widget: âœ… Entity 1765756095811-l70sr0tf0 found in widget (17 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765756100982_qhiwlccf
  ğŸ“¸ Screenshot: user-update.png
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765756102159_ekdu7vt9
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756104174_y27603mv
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765756104178_5958f10y
  ğŸ“¸ Screenshot: user-delete.png

ğŸ§ª CRUD TEST: rooms â†’ room-list-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756107336_dlh20rll
  ğŸ¨ Widget: âœ… Widget working (4 entities)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765756107342_ss1gptph
  ğŸ“¸ Screenshot: room-before.png
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765756108483_ojt73dgn
âœ… CREATE: 1765756108484-v10gjzwhf

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765756110496_jy0x58y9
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756110497_b1q2909a
  ğŸ¨ Widget: âœ… Entity 1765756108484-v10gjzwhf found in widget (5 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765756110504_iy9ec1q9
  ğŸ“¸ Screenshot: room-create.png
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765756111666_zr5rbjef
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765756113677_rnhloj6c
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756113678_ypopgm4k
  ğŸ¨ Widget: âœ… Entity 1765756108484-v10gjzwhf found in widget (5 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765756113681_r13q02t3
  ğŸ“¸ Screenshot: room-update.png
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765756114849_oshz3het
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756116858_hrzhhv7t
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765756116870_nj3e3quk
  ğŸ“¸ Screenshot: room-delete.png
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765756118029_xjguu11t

ğŸ§ª CRUD TEST: chat_messages â†’ chat-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756120037_zq8vab5x
  ğŸ¨ Widget: âœ… Widget working (30 entities)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765756120047_njxizlq5
âœ… CREATE: 1765756120048-lf0j0offj

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765756122108_tp3ln3w2
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756122110_6d04lzoh
  ğŸ¨ Widget: âœ… Entity 1765756120048-lf0j0offj found in widget (31 total)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765756122117_68s94zv6
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765756124129_dnh9a8v4
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756126406_dl0ruosz
  ğŸ¨ Widget: âœ… Entity 1765756120048-lf0j0offj found in widget (31 total)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765756126587_97tx3hmp
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765756137397_mefciwe7
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)

ğŸ‰ ALL CRUD TESTS PASSED (3 entities Ã— 4 operations = 12 screenshots)
ğŸ”Œ JTAGClient: Disconnecting...
ğŸ”„ JTAGClient: Preserving shared session b8e81836-cdcb-4454-a941-84087320bffb on disconnect (shared: true)
ğŸ”Œ websocket-server-client: Disconnecting
âœ… JTAGClient: Transport disconnected
ğŸ›‘ ConnectionBroker: Shutting down...
âœ… ConnectionBroker: Shutdown complete
âœ… JTAGClient: Connection Broker shut down
âœ… Database chat integration test completed successfully
