ğŸ—„ï¸ DATABASE CHAT INTEGRATION TEST
=================================
ğŸ”— Connecting to JTAG system...
ğŸ”Œ Server: Connecting via JTAGClientServer (target: server)
ğŸ”„ JTAGClient: Connecting to server system with secure configuration...
ğŸ¯ JTAGClient: Provided sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de
ğŸŒ JTAGClientServer: No local system - using remote connection
ğŸ”— JTAGClient: Using Connection Broker for intelligent connection management
ğŸ”§ JTAGClient: Connection with sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de (provided: deadbeef-cafe-4bad-8ace-5e551000c0de, current: deadbeef-cafe-4bad-8ace-5e551000c0de)
ğŸ”— ConnectionBroker: Processing connection request for server (mode: preferred)
ğŸ”— ConnectionBroker: Creating client connection to existing server
ğŸ“‹ ConnectionBroker: Registered server existing-jtag-server-9002 (16dc6bc2-6265-4561-8112-19b19b452282) on port 9002
ğŸ­ Server Transport Factory (Registry-Based): Creating websocket transport for server environment
ğŸ” Server Factory: Looking for websocket transport (role: client) in registry
âœ… Server Factory: Found adapter WebSocketTransportClientServer for websocket/client
ğŸ”— websocket-server-client: Connecting to ws://localhost:9002
âœ… websocket-server-client: Connected
âœ… websocket-server-client: Handler compliance enforced by TypeScript
ğŸš€ Server Factory: Adapter WebSocketTransportClientServer connected successfully
âœ… Server Transport Factory (Registry-Based): web-socket-transport-client-server transport created successfully
âœ… JTAGClient: created_new connection established on port 9002
ğŸ·ï¸ JTAGClient: Requesting session from SessionDaemon...
ğŸ”„ JTAGClient: Using provided sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de
ğŸ” JTAGClient: Detected category=user, displayName=CLI Client, isAgent=undefined
ğŸ”‘ JTAGClient: Computed uniqueId="cli" for CLI Client (isEphemeralClient=true, isAgent=undefined)
ğŸ“¤ RemoteConnection: Sending command 'session/create' with correlation client_1765334606078_sijntxn5
ğŸ·ï¸ JTAGClientServer: Session updated to: de95fc73-9896-4824-a819-17a87a6e3800 (managed by base class)
ğŸ“‹ JTAGClient: Discovering available commands...
ğŸ“¤ RemoteConnection: Sending command 'list' with correlation client_1765334606083_0qd5dbr6
âœ… JTAGClient: Connection established
ğŸ”„ JTAGClient: Discovering available commands...
ğŸ“¤ RemoteConnection: Sending command 'list' with correlation client_1765334606085_1fdrv14d
âœ… Server: JTAGClient connected with 140 commands
âœ… Connected

ğŸ§¹ Cleaning up orphaned test data from previous runs...
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765334606086_wwti9hib
  âœ… No orphaned test users found
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765334606088_kxtlrw48
  âœ… No orphaned test rooms found
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765334606091_ljod7k6f
  âœ… No orphaned test messages found
âœ… Cleanup complete

â³ Waiting for widgets to initialize...
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334609561_0ic4ex5c
âœ… Widget user-list-widget initialized
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334609565_y0274mu2
âœ… Widget room-list-widget initialized
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334609569_gmbn38by
âœ… Widget chat-widget initialized

ğŸ§ª CRUD TEST: users â†’ user-list-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334611573_mudsbvk8
  ğŸ¨ Widget: âœ… Widget working (16 entities)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765334611577_gqaq4fhh
  ğŸ“¸ Screenshot: user-before.png
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765334613219_iza419zz
âœ… CREATE: 1765334613219-zxg9qhe0u

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765334615230_nqvq9uv9
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334615231_nmezl2pv
  ğŸ¨ Widget: âœ… Entity 1765334613219-zxg9qhe0u found in widget (17 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765334615235_xi5cu63c
  ğŸ“¸ Screenshot: user-create.png
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765334616757_ugmrhpmx
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765334618769_x1a5dng2
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334618771_xftgfhem
  ğŸ¨ Widget: âœ… Entity 1765334613219-zxg9qhe0u found in widget (17 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765334618775_o2w4p1u9
  ğŸ“¸ Screenshot: user-update.png
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765334620317_u1yvgjhm
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334622334_r1nus23m
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765334622337_pboqyryd
  ğŸ“¸ Screenshot: user-delete.png

ğŸ§ª CRUD TEST: rooms â†’ room-list-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334625863_0qxz2m9z
  ğŸ¨ Widget: âœ… Widget working (4 entities)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765334625867_60j6flvj
  ğŸ“¸ Screenshot: room-before.png
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765334627391_eu3bjwy3
âœ… CREATE: 1765334627391-occu9xhtm

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765334629402_ca1yzaja
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334629406_tdji0wr0
  ğŸ¨ Widget: âœ… Entity 1765334627391-occu9xhtm found in widget (5 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765334629410_axnfyw8v
  ğŸ“¸ Screenshot: room-create.png
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765334630906_w5n798sa
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765334632919_o82ixm5j
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334632923_1d9wvm74
  ğŸ¨ Widget: âœ… Entity 1765334627391-occu9xhtm found in widget (5 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765334632930_p37o9qw5
  ğŸ“¸ Screenshot: room-update.png
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765334634425_or1cgp7s
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334636437_c8qcaomc
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765334636446_vv42rt08
  ğŸ“¸ Screenshot: room-delete.png
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765334637938_q3tn6cba

ğŸ§ª CRUD TEST: chat_messages â†’ chat-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334639942_rq879evt
  ğŸ¨ Widget: âœ… Widget working (30 entities)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765334639950_5azd17xz
âœ… CREATE: 1765334639950-sxdhjz2x0

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765334641994_1r8uu0bl
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334643586_0kzwj0l0
  ğŸ¨ Widget: âœ… Entity 1765334639950-sxdhjz2x0 found in widget (31 total)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765334644822_9krq0pn6
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765334647500_6imdn0m1
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334649284_q8jbf352
  ğŸ¨ Widget: âœ… Entity 1765334639950-sxdhjz2x0 found in widget (31 total)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765334649302_2ixv18sx
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765334651878_548l7v6p
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)

ğŸ‰ ALL CRUD TESTS PASSED (3 entities Ã— 4 operations = 12 screenshots)
ğŸ”Œ JTAGClient: Disconnecting...
ğŸ”„ JTAGClient: Preserving shared session de95fc73-9896-4824-a819-17a87a6e3800 on disconnect (shared: true)
ğŸ”Œ websocket-server-client: Disconnecting
âœ… JTAGClient: Transport disconnected
ğŸ›‘ ConnectionBroker: Shutting down...
âœ… ConnectionBroker: Shutdown complete
âœ… JTAGClient: Connection Broker shut down
âœ… Database chat integration test completed successfully
