ğŸ—„ï¸ DATABASE CHAT INTEGRATION TEST
=================================
ğŸ”— Connecting to JTAG system...
ğŸ”Œ Server: Connecting via JTAGClientServer (target: server)
ğŸ”„ JTAGClient: Connecting to server system with secure configuration...
ğŸ¯ JTAGClient: Provided sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de
ğŸŒ JTAGClientServer: No local system - using remote connection
ğŸ”— JTAGClient: Using Connection Broker for intelligent connection management
ğŸ”§ JTAGClient: Connection with sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de (provided: deadbeef-cafe-4bad-8ace-5e551000c0de, current: deadbeef-cafe-4bad-8ace-5e551000c0de)
ğŸ”— ConnectionBroker: Processing connection request for server (mode: preferred)
ğŸ”— ConnectionBroker: Creating client connection to existing server
ğŸ“‹ ConnectionBroker: Registered server existing-jtag-server-9002 (49225463-4ee9-4bf1-a9b0-3ebb094a2095) on port 9002
ğŸ­ Server Transport Factory (Registry-Based): Creating websocket transport for server environment
ğŸ” Server Factory: Looking for websocket transport (role: client) in registry
âœ… Server Factory: Found adapter WebSocketTransportClientServer for websocket/client
ğŸ”— websocket-server-client: Connecting to ws://localhost:9002
âœ… websocket-server-client: Connected
âœ… websocket-server-client: Handler compliance enforced by TypeScript
ğŸš€ Server Factory: Adapter WebSocketTransportClientServer connected successfully
âœ… Server Transport Factory (Registry-Based): web-socket-transport-client-server transport created successfully
âœ… JTAGClient: created_new connection established on port 9002
ğŸ·ï¸ JTAGClient: Requesting session from SessionDaemon...
ğŸ”„ JTAGClient: Using provided sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de
ğŸ” JTAGClient: Detected category=user, displayName=CLI Client, isAgent=undefined
ğŸ”‘ JTAGClient: Computed uniqueId="cli" for CLI Client (isEphemeralClient=true, isAgent=undefined)
ğŸ“¤ RemoteConnection: Sending command 'session/create' with correlation client_1765249582315_vuc34xte
ğŸ·ï¸ JTAGClientServer: Session updated to: 04eb1478-2b09-4d19-88d4-55468a1c0ca6 (managed by base class)
ğŸ“‹ JTAGClient: Discovering available commands...
ğŸ“¤ RemoteConnection: Sending command 'list' with correlation client_1765249582320_4hyi0iti
âœ… JTAGClient: Connection established
ğŸ”„ JTAGClient: Discovering available commands...
ğŸ“¤ RemoteConnection: Sending command 'list' with correlation client_1765249582322_83v9l35u
âœ… Server: JTAGClient connected with 140 commands
âœ… Connected

ğŸ§¹ Cleaning up orphaned test data from previous runs...
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765249582324_nt2uj158
  âœ… No orphaned test users found
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765249582325_55f6z6vr
  âœ… No orphaned test rooms found
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765249582328_xiwkuf5x
  âœ… No orphaned test messages found
âœ… Cleanup complete

â³ Waiting for widgets to initialize...
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249585812_rjiuy1nx
âœ… Widget user-list-widget initialized
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249585816_i2hjdd7s
âœ… Widget room-list-widget initialized
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249585819_uct7b4o0
âœ… Widget chat-widget initialized

ğŸ§ª CRUD TEST: users â†’ user-list-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249587824_jl9vox88
  ğŸ¨ Widget: âœ… Widget working (16 entities)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765249587828_nql05r0l
  ğŸ“¸ Screenshot: user-before.png
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765249589071_70jcr7l0
âœ… CREATE: 1765249589071-qdu8egqno

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765249591082_fzvgcpff
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249591084_ogsxvqzp
  ğŸ¨ Widget: âœ… Entity 1765249589071-qdu8egqno found in widget (17 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765249591087_0mb8dsj8
  ğŸ“¸ Screenshot: user-create.png
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765249592240_g1cwwvjn
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765249594252_x95ctrhp
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249594253_5gj9mifd
  ğŸ¨ Widget: âœ… Entity 1765249589071-qdu8egqno found in widget (17 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765249594257_ws6jxltj
  ğŸ“¸ Screenshot: user-update.png
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765249595392_g5jo0dk1
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249597404_lyng4gaz
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765249597407_fcu7eiw3
  ğŸ“¸ Screenshot: user-delete.png

ğŸ§ª CRUD TEST: rooms â†’ room-list-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249600563_v0wm8yia
  ğŸ¨ Widget: âœ… Widget working (4 entities)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765249600566_5ruj4x6j
  ğŸ“¸ Screenshot: room-before.png
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765249601654_k290twdv
âœ… CREATE: 1765249601654-vuluuopct

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765249603666_mkn029mh
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249603667_mr04o8jd
  ğŸ¨ Widget: âœ… Entity 1765249601654-vuluuopct found in widget (5 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765249603670_2q4pus8h
  ğŸ“¸ Screenshot: room-create.png
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765249604748_18p12t3s
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765249606759_fhg64q23
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249606761_72wsod27
  ğŸ¨ Widget: âœ… Entity 1765249601654-vuluuopct found in widget (5 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765249606764_va5q8np9
  ğŸ“¸ Screenshot: room-update.png
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765249607884_f2owz2bt
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249609900_sfol1njl
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765249609970_qkw6jh1d
  ğŸ“¸ Screenshot: room-delete.png
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765249617412_ld1hwlnl

ğŸ§ª CRUD TEST: chat_messages â†’ chat-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249624687_rfrh82ug
  ğŸ¨ Widget: âœ… Widget working (31 entities)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765249627366_ay8mho4s
âœ… CREATE: 1765249627868-iessww7ju

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765249630245_v5shti8m
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249630246_c4fupn71
  ğŸ¨ Widget: âœ… Entity 1765249627868-iessww7ju found in widget (32 total)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765249630252_bpx6pd78
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765249632265_9w9xfiba
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249633114_7v5oxe15
  ğŸ¨ Widget: âœ… Entity 1765249627868-iessww7ju found in widget (34 total)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765249633335_rcvk5u0q
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765249637949_0s9v47u1
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)

ğŸ‰ ALL CRUD TESTS PASSED (3 entities Ã— 4 operations = 12 screenshots)
ğŸ”Œ JTAGClient: Disconnecting...
ğŸ”„ JTAGClient: Preserving shared session 04eb1478-2b09-4d19-88d4-55468a1c0ca6 on disconnect (shared: true)
ğŸ”Œ websocket-server-client: Disconnecting
âœ… JTAGClient: Transport disconnected
ğŸ›‘ ConnectionBroker: Shutting down...
âœ… ConnectionBroker: Shutdown complete
âœ… JTAGClient: Connection Broker shut down
âœ… Database chat integration test completed successfully
