ğŸ—„ï¸ DATABASE CHAT INTEGRATION TEST
=================================
ğŸ”— Connecting to JTAG system...
ğŸ”Œ Server: Connecting via JTAGClientServer (target: server)
ğŸ”„ JTAGClient: Connecting to server system with secure configuration...
ğŸ¯ JTAGClient: Provided sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de
ğŸŒ JTAGClientServer: No local system - using remote connection
ğŸ”— JTAGClient: Using Connection Broker for intelligent connection management
ğŸ”§ JTAGClient: Connection with sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de (provided: deadbeef-cafe-4bad-8ace-5e551000c0de, current: deadbeef-cafe-4bad-8ace-5e551000c0de)
ğŸ”— ConnectionBroker: Processing connection request for server (mode: preferred)
ğŸ”— ConnectionBroker: Creating client connection to existing server
ğŸ“‹ ConnectionBroker: Registered server existing-jtag-server-9002 (8fe55b45-bf40-44ae-bb44-0c567f46ba16) on port 9002
ğŸ­ Server Transport Factory (Registry-Based): Creating websocket transport for server environment
ğŸ” Server Factory: Looking for websocket transport (role: client) in registry
âœ… Server Factory: Found adapter WebSocketTransportClientServer for websocket/client
ğŸ”— websocket-server-client: Connecting to ws://localhost:9002
âœ… websocket-server-client: Connected
âœ… websocket-server-client: Handler compliance enforced by TypeScript
ğŸš€ Server Factory: Adapter WebSocketTransportClientServer connected successfully
âœ… Server Transport Factory (Registry-Based): web-socket-transport-client-server transport created successfully
âœ… JTAGClient: created_new connection established on port 9002
ğŸ·ï¸ JTAGClient: Requesting session from SessionDaemon...
ğŸ”„ JTAGClient: Using provided sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de
ğŸ” JTAGClient: Detected category=user, displayName=CLI Client, isAgent=undefined
ğŸ”‘ JTAGClient: Computed uniqueId="cli" for CLI Client (isEphemeralClient=true, isAgent=undefined)
ğŸ“¤ RemoteConnection: Sending command 'session/create' with correlation client_1765182668117_yczhhord
ğŸ·ï¸ JTAGClientServer: Session updated to: da9a9789-8765-4208-a79a-562de4aa513a (managed by base class)
ğŸ“‹ JTAGClient: Discovering available commands...
ğŸ“¤ RemoteConnection: Sending command 'list' with correlation client_1765182668121_d0ihjw8m
âœ… JTAGClient: Connection established
ğŸ”„ JTAGClient: Discovering available commands...
ğŸ“¤ RemoteConnection: Sending command 'list' with correlation client_1765182668123_6ax0slsw
âœ… Server: JTAGClient connected with 140 commands
âœ… Connected

ğŸ§¹ Cleaning up orphaned test data from previous runs...
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765182668125_7wgj23xk
  âœ… No orphaned test users found
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765182668127_prc3n3g3
  âœ… No orphaned test rooms found
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765182668130_7jq7qlbc
  âœ… No orphaned test messages found
âœ… Cleanup complete

â³ Waiting for widgets to initialize...
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182671592_kc7daqyk
âœ… Widget user-list-widget initialized
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182671597_v0js6qgf
âœ… Widget room-list-widget initialized
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182671599_vsxpbky5
âœ… Widget chat-widget initialized

ğŸ§ª CRUD TEST: users â†’ user-list-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182673605_w4kiynbf
  ğŸ¨ Widget: âœ… Widget working (16 entities)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765182673609_hijayvel
  ğŸ“¸ Screenshot: user-before.png
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765182674809_025soepv
âœ… CREATE: 1765182674810-8g0nqp18l

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765182676822_tlu9pf1k
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182676823_0girb9sp
  ğŸ¨ Widget: âœ… Entity 1765182674810-8g0nqp18l found in widget (17 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765182676827_cp9ii6sh
  ğŸ“¸ Screenshot: user-create.png
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765182677926_lhv14l5s
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765182679937_vn0t62bi
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182679938_ush4f13k
  ğŸ¨ Widget: âœ… Entity 1765182674810-8g0nqp18l found in widget (17 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765182679941_b2bcx4mt
  ğŸ“¸ Screenshot: user-update.png
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765182681051_of36u0yx
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182683064_zamiq9qx
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765182683067_fismunyk
  ğŸ“¸ Screenshot: user-delete.png

ğŸ§ª CRUD TEST: rooms â†’ room-list-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182686166_kkuhisr7
  ğŸ¨ Widget: âœ… Widget working (4 entities)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765182686179_5t5ghmhb
  ğŸ“¸ Screenshot: room-before.png
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765182687244_8znadygt
âœ… CREATE: 1765182687244-97b1vtk8l

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765182689254_mw6bv1dj
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182689257_9dskjc8r
  ğŸ¨ Widget: âœ… Entity 1765182687244-97b1vtk8l found in widget (5 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765182689267_whenk6kr
  ğŸ“¸ Screenshot: room-create.png
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765182690337_tmg8cre1
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765182692360_lcdvhy58
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182692364_j8vi5m3h
  ğŸ¨ Widget: âœ… Entity 1765182687244-97b1vtk8l found in widget (5 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765182692372_l3bfmhiv
  ğŸ“¸ Screenshot: room-update.png
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765182693460_jkr3h2n1
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182695477_4vdh737e
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765182695486_z8myo2u9
  ğŸ“¸ Screenshot: room-delete.png
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765182696575_uxrx1gl6

ğŸ§ª CRUD TEST: chat_messages â†’ chat-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182698579_79st3i7e
  ğŸ¨ Widget: âœ… Widget working (30 entities)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765182698596_73zvyy0x
âœ… CREATE: 1765182698597-y3sn4b9nj

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765182700632_626b5977
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182702581_mqcny9rl
  ğŸ¨ Widget: âœ… Entity 1765182698597-y3sn4b9nj found in widget (31 total)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765182702724_2ozsp6fp
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765182708656_dw2mqeyr
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182709265_dpc1xn49
  ğŸ¨ Widget: âœ… Entity 1765182698597-y3sn4b9nj found in widget (31 total)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765182709627_pdsqo1wi
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765182713349_43de6ane
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)

ğŸ‰ ALL CRUD TESTS PASSED (3 entities Ã— 4 operations = 12 screenshots)
ğŸ”Œ JTAGClient: Disconnecting...
ğŸ”„ JTAGClient: Preserving shared session da9a9789-8765-4208-a79a-562de4aa513a on disconnect (shared: true)
ğŸ”Œ websocket-server-client: Disconnecting
âœ… JTAGClient: Transport disconnected
ğŸ›‘ ConnectionBroker: Shutting down...
âœ… ConnectionBroker: Shutdown complete
âœ… JTAGClient: Connection Broker shut down
âœ… Database chat integration test completed successfully
