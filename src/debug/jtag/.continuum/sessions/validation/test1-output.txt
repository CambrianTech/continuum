ğŸ—„ï¸ DATABASE CHAT INTEGRATION TEST
=================================
ğŸ”— Connecting to JTAG system...
ğŸ”Œ Server: Connecting via JTAGClientServer (target: server)
ğŸ”„ JTAGClient: Connecting to server system with secure configuration...
ğŸ¯ JTAGClient: Provided sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de
ğŸŒ JTAGClientServer: No local system - using remote connection
ğŸ”— JTAGClient: Using Connection Broker for intelligent connection management
ğŸ”§ JTAGClient: Connection with sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de (provided: deadbeef-cafe-4bad-8ace-5e551000c0de, current: deadbeef-cafe-4bad-8ace-5e551000c0de)
ğŸ”— ConnectionBroker: Processing connection request for server (mode: preferred)
ğŸ”— ConnectionBroker: Creating client connection to existing server
ğŸ“‹ ConnectionBroker: Registered server existing-jtag-server-9002 (694285c8-d35f-4eac-904f-a75350e02541) on port 9002
ğŸ­ Server Transport Factory (Registry-Based): Creating websocket transport for server environment
ğŸ” Server Factory: Looking for websocket transport (role: client) in registry
âœ… Server Factory: Found adapter WebSocketTransportClientServer for websocket/client
ğŸ”— websocket-server-client: Connecting to ws://localhost:9002
âœ… websocket-server-client: Connected
âœ… websocket-server-client: Handler compliance enforced by TypeScript
ğŸš€ Server Factory: Adapter WebSocketTransportClientServer connected successfully
âœ… Server Transport Factory (Registry-Based): web-socket-transport-client-server transport created successfully
âœ… JTAGClient: created_new connection established on port 9002
ğŸ·ï¸ JTAGClient: Requesting session from SessionDaemon...
ğŸ”„ JTAGClient: Using provided sessionId: deadbeef-cafe-4bad-8ace-5e551000c0de
ğŸ” JTAGClient: Detected category=user, displayName=CLI Client, isAgent=undefined
ğŸ”‘ JTAGClient: Computed uniqueId="cli" for CLI Client (isEphemeralClient=true, isAgent=undefined)
ğŸ“¤ RemoteConnection: Sending command 'session/create' with correlation client_1765147647236_iryekwkj
ğŸ·ï¸ JTAGClientServer: Session updated to: adc3b0ec-2164-40d8-bde5-c0cce728991a (managed by base class)
ğŸ“‹ JTAGClient: Discovering available commands...
ğŸ“¤ RemoteConnection: Sending command 'list' with correlation client_1765147647240_xod6w3ug
âœ… JTAGClient: Connection established
ğŸ”„ JTAGClient: Discovering available commands...
ğŸ“¤ RemoteConnection: Sending command 'list' with correlation client_1765147647241_wgp815zv
âœ… Server: JTAGClient connected with 136 commands
âœ… Connected

ğŸ§¹ Cleaning up orphaned test data from previous runs...
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765147647243_2j03fuhe
  âœ… No orphaned test users found
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765147647245_bb2s60li
  âœ… No orphaned test rooms found
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765147647247_r12i2bq0
  âœ… No orphaned test messages found
âœ… Cleanup complete

â³ Waiting for widgets to initialize...
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147650645_28tqgxl9
âœ… Widget user-list-widget initialized
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147650649_45exyv94
âœ… Widget room-list-widget initialized
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147650652_69my9pva
âœ… Widget chat-widget initialized

ğŸ§ª CRUD TEST: users â†’ user-list-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147652656_d8baj091
  ğŸ¨ Widget: âœ… Widget working (16 entities)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765147652660_iblncgly
  ğŸ“¸ Screenshot: user-before.png
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765147653864_v3iz1n48
âœ… CREATE: 1765147653865-ehor26yhi

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765147655877_p54i8dr6
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147655878_2num0672
  ğŸ¨ Widget: âœ… Entity 1765147653865-ehor26yhi found in widget (17 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765147655883_9mr1mueb
  ğŸ“¸ Screenshot: user-create.png
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765147656984_mya3zn6i
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765147658999_vxewqg2l
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147659001_fx3pcxdp
  ğŸ¨ Widget: âœ… Entity 1765147653865-ehor26yhi found in widget (17 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765147659004_r8d83gkb
  ğŸ“¸ Screenshot: user-update.png
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765147660107_n5x66kdz
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147662119_hwcmaaq1
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765147662126_oqfmnw12
  ğŸ“¸ Screenshot: user-delete.png

ğŸ§ª CRUD TEST: rooms â†’ room-list-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147665233_i7vl6eto
  ğŸ¨ Widget: âœ… Widget working (4 entities)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765147665236_2dwqtpos
  ğŸ“¸ Screenshot: room-before.png
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765147666354_gyf1g49r
âœ… CREATE: 1765147666354-eaivqzfnv

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765147668365_z4kbd2wm
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147668373_okeqsy0b
  ğŸ¨ Widget: âœ… Entity 1765147666354-eaivqzfnv found in widget (5 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765147668388_r7jpqzra
  ğŸ“¸ Screenshot: room-create.png
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765147669503_xrurko28
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765147671516_qzha5gat
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147671519_o0buldhq
  ğŸ¨ Widget: âœ… Entity 1765147666354-eaivqzfnv found in widget (5 total)
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765147671536_c9hpzrto
  ğŸ“¸ Screenshot: room-update.png
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765147672628_pzohyqmg
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147674641_vqyniffs
ğŸ“¤ RemoteConnection: Sending command 'screenshot' with correlation client_1765147674653_2a88gbem
  ğŸ“¸ Screenshot: room-delete.png
ğŸ“¤ RemoteConnection: Sending command 'data/list' with correlation client_1765147675738_nz2nnfnu

ğŸ§ª CRUD TEST: chat_messages â†’ chat-widget

ğŸ“‹ VERIFY after BEFORE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147677741_zwfug7rg
  ğŸ¨ Widget: âœ… Widget working (30 entities)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/create' with correlation client_1765147677754_8act7amf
âœ… CREATE: 1765147677755-2bqmn27xp

ğŸ“‹ VERIFY after CREATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765147679794_yemye1ms
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147681534_zrt9o4xi
  ğŸ¨ Widget: âœ… Entity 1765147677755-2bqmn27xp found in widget (31 total)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/update' with correlation client_1765147681773_3kp8jhj6
âœ… UPDATE: Modified

ğŸ“‹ VERIFY after UPDATE:
ğŸ“¤ RemoteConnection: Sending command 'data/read' with correlation client_1765147687386_u898z3pq
  ğŸ“Š DB: âœ… Found
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147687829_2pjqk7vl
  ğŸ¨ Widget: âœ… Entity 1765147677755-2bqmn27xp found in widget (31 total)
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)
ğŸ“¤ RemoteConnection: Sending command 'data/delete' with correlation client_1765147688393_lkibx1sk
âœ… DELETE: Removed

ğŸ“‹ VERIFY after DELETE:
ğŸ“¤ RemoteConnection: Sending command 'debug/widget-state' with correlation client_1765147692726_vs1xzaoz
  ğŸ“¸ Screenshot: SKIPPED (chat-widget too heavy for precommit)

ğŸ‰ ALL CRUD TESTS PASSED (3 entities Ã— 4 operations = 12 screenshots)
ğŸ”Œ JTAGClient: Disconnecting...
ğŸ”„ JTAGClient: Preserving shared session adc3b0ec-2164-40d8-bde5-c0cce728991a on disconnect (shared: true)
ğŸ”Œ websocket-server-client: Disconnecting
âœ… JTAGClient: Transport disconnected
ğŸ›‘ ConnectionBroker: Shutting down...
âœ… ConnectionBroker: Shutdown complete
âœ… JTAGClient: Connection Broker shut down
âœ… Database chat integration test completed successfully
