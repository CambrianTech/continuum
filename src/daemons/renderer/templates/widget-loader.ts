// Widget Loader - TypeScript Web Components Template
// Generated by RendererDaemon from static template

console.log('ðŸŽ¨ Widget Loader: Initializing TypeScript web components...');

interface ContinuumAPI {
    connect(): Promise<void>;
    disconnect(): void;
    isConnected(): boolean;
    getConnectionState(): string;
    validateClientHealth(): Promise<any>;
    execute(command: string, params?: any): Promise<any>;
    on(event: string, handler: (data?: any) => void): void;
    off(event: string, handler?: (data?: any) => void): void;
    emit(event: string, data?: any): void;
}

declare global {
    interface Window {
        continuum: ContinuumAPI;
        __CONTINUUM_VERSION__: string;
    }
}

// Register Web Components
console.log('ðŸŽ¨ Registering TypeScript web components...');
customElements.define('chat-widget', ChatWidget);
customElements.define('continuum-sidebar', ContinuumSidebar);

console.log('ðŸŽ¨ Widget Loader: TypeScript web components registered successfully');

// Auto-validate widgets after DOM is ready
document.addEventListener('DOMContentLoaded', (): void => {
    console.log('ðŸŽ¨ Widget Loader: DOM ready, validating components...');
    
    const sidebar = document.querySelector('continuum-sidebar');
    const chat = document.querySelector('chat-widget');
    
    console.log(`ðŸŽ¨ Sidebar widget: ${sidebar ? 'FOUND' : 'MISSING'}`);
    console.log(`ðŸŽ¨ Chat widget: ${chat ? 'FOUND' : 'MISSING'}`);
    
    if (window.continuum?.validateClientHealth) {
        setTimeout((): void => {
            window.continuum.validateClientHealth();
        }, 1000);
    }
});

export default { ChatWidget, ContinuumSidebar };