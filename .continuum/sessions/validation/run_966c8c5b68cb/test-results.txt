ğŸ§ª Simple CRUD + DB + Widget Test
==================================
Widget verification delay: 3000ms
Widget timeout: 15000ms

ğŸ“‹ Testing User...
ğŸ—ï¸ SchemaFactory: Creating User with complete structure (seeding approach)...
ğŸ—ï¸ SchemaFactory: Generated complete data for User: {
  displayName: 'Test User',
  shortDescription: 'Test user entity',
  type: 'human',
  profile: {
    displayName: 'Test User',
    avatar: 'ğŸ§ª',
    bio: 'Test user for integration testing',
    location: 'Test Environment',
    joinedAt: '2025-09-28T05:52:02.491Z'
  },
  capabilities: {
    canSendMessages: true,
    canReceiveMessages: true,
    canTrain: false,
    canCreateRooms: true,
    canInviteOthers: true,
    canModerate: true,
    autoResponds: false,
    providesContext: false,
    canAccessPersonas: true
  },
  preferences: {
    theme: 'dark',
    language: 'en',
    timezone: 'UTC',
    notifications: { mentions: true, directMessages: true, roomUpdates: false },
    privacy: {
      showOnlineStatus: true,
      allowDirectMessages: true,
      shareActivity: false
    }
  },
  status: 'online',
  lastActiveAt: '2025-09-28T05:52:02.491Z',
  sessionsActive: []
}
âœ… SchemaFactory: Created User/1759038723410-431rv07am
âœ… Created: 1759038723410-431rv07am
âœ… Successfully parsed JSON for command: data/read --collection="User" --id="1759038723410-431rv07am"
ğŸ” Checking if user-list-widget contains entity 1759038723410-431rv07am
ğŸ” Widget state result for user-list-widget: success=true
ğŸ” Entity 1759038723410-431rv07am found in user-list-widget: true
   DB: âœ… | Widget: âœ…
âœ… Successfully parsed JSON for command: data/update --collection="User" --id="1759038723410-431rv07am" --data='{"displayName":"Updated Test User"}'
âœ… Successfully parsed JSON for command: data/read --collection="User" --id="1759038723410-431rv07am"
ğŸ” Checking if user-list-widget contains entity Updated Test User
ğŸ” Widget state result for user-list-widget: success=true
ğŸ” Entity Updated Test User found in user-list-widget: true
   UPDATE - DB: âœ… | Widget: âœ…
âœ… Successfully parsed JSON for command: data/delete --collection="User" --id="1759038723410-431rv07am"
âœ… Successfully parsed JSON for command: data/read --collection="User" --id="1759038723410-431rv07am"
ğŸ” Checking if user-list-widget contains entity 1759038723410-431rv07am
ğŸ” Widget state result for user-list-widget: success=true
ğŸ” Entity 1759038723410-431rv07am found in user-list-widget: false
   DELETE - DB: âœ… | Widget: âœ…

ğŸ“‹ Testing Room...
ğŸ—ï¸ SchemaFactory: Creating Room with complete structure (seeding approach)...
ğŸ—ï¸ SchemaFactory: Generated complete data for Room: {
  name: 'Test Room',
  displayName: 'Test Room',
  description: 'Test room for integration testing',
  topic: 'Test room topic for development',
  type: 'public',
  status: 'active',
  ownerId: '002350cc-0031-408d-8040-004f000f',
  lastMessageAt: '2025-09-28T05:52:20.642Z',
  privacy: {
    isPublic: true,
    requiresInvite: false,
    allowGuestAccess: true,
    searchable: true
  },
  settings: {
    allowReactions: true,
    allowThreads: true,
    allowFileSharing: true,
    messageRetentionDays: 365
  },
  stats: {
    memberCount: 1,
    messageCount: 0,
    createdAt: '2025-09-28T05:52:20.642Z',
    lastActivityAt: '2025-09-28T05:52:20.642Z'
  },
  members: [],
  tags: [ 'test', 'integration' ]
}
âœ… SchemaFactory: Created Room/1759038741474-w6ou1adzj
âœ… Created: 1759038741474-w6ou1adzj
âœ… Successfully parsed JSON for command: data/read --collection="Room" --id="1759038741474-w6ou1adzj"
ğŸ” Checking if room-list-widget contains entity 1759038741474-w6ou1adzj
ğŸ” Widget state result for room-list-widget: success=true
ğŸ” Entity 1759038741474-w6ou1adzj found in room-list-widget: true
   DB: âœ… | Widget: âœ…
âœ… Successfully parsed JSON for command: data/update --collection="Room" --id="1759038741474-w6ou1adzj" --data='{"displayName":"Updated Test Room"}'
âœ… Successfully parsed JSON for command: data/read --collection="Room" --id="1759038741474-w6ou1adzj"
ğŸ” Checking if room-list-widget contains entity Updated Test Room
ğŸ” Widget state result for room-list-widget: success=true
ğŸ” Entity Updated Test Room found in room-list-widget: true
   UPDATE - DB: âœ… | Widget: âœ…
âœ… Successfully parsed JSON for command: data/delete --collection="Room" --id="1759038741474-w6ou1adzj"
âœ… Successfully parsed JSON for command: data/read --collection="Room" --id="1759038741474-w6ou1adzj"
ğŸ” Checking if room-list-widget contains entity 1759038741474-w6ou1adzj
ğŸ” Widget state result for room-list-widget: success=true
ğŸ” Entity 1759038741474-w6ou1adzj found in room-list-widget: false
   DELETE - DB: âœ… | Widget: âœ…

ğŸ“‹ Testing ChatMessage...
ğŸ—ï¸ SchemaFactory: Creating ChatMessage with complete structure (seeding approach)...
ğŸ—ï¸ SchemaFactory: Generated complete data for ChatMessage: {
  roomId: '5e71a0c8-0303-4eb8-a478-3a121248',
  senderId: '002350cc-0031-408d-8040-004f000f',
  senderName: 'Test Sender',
  content: { text: 'Test Message', attachments: [] },
  status: 'sent',
  priority: 'normal',
  timestamp: '2025-09-28T05:52:38.097Z',
  reactions: []
}
âœ… SchemaFactory: Created ChatMessage/1759038758921-qizoplbks
âœ… Created: 1759038758921-qizoplbks
âœ… Successfully parsed JSON for command: data/read --collection="ChatMessage" --id="1759038758921-qizoplbks"
ğŸ” Checking if chat-widget contains entity 1759038758921-qizoplbks
ğŸ” Entity 1759038758921-qizoplbks found in chat-widget (grep search): true
   DB: âœ… | Widget: âœ…
âœ… Successfully parsed JSON for command: data/update --collection="ChatMessage" --id="1759038758921-qizoplbks" --data='{"content":{"text":"Updated Test Message","attachments":[]}}'
âœ… Successfully parsed JSON for command: data/read --collection="ChatMessage" --id="1759038758921-qizoplbks"
ğŸ” Checking if chat-widget contains entity Updated Test Message
ğŸ” Entity Updated Test Message found in chat-widget (grep search): true
   UPDATE - DB: âœ… | Widget: âœ…
âœ… Successfully parsed JSON for command: data/delete --collection="ChatMessage" --id="1759038758921-qizoplbks"
âœ… Successfully parsed JSON for command: data/read --collection="ChatMessage" --id="1759038758921-qizoplbks"
ğŸ” Checking if chat-widget contains entity 1759038758921-qizoplbks
ğŸ” Entity 1759038758921-qizoplbks found in chat-widget (grep search): false
   DELETE - DB: âœ… | Widget: âœ…

ğŸ“Š CRUD + DB + Widget Test Results:
====================================
âœ… User CREATE: DB(âœ…) Widget(âœ…)
âœ… User UPDATE: DB(âœ…) Widget(âœ…)
âœ… User DELETE: DB(âœ…) Widget(âœ…)
âœ… Room CREATE: DB(âœ…) Widget(âœ…)
âœ… Room UPDATE: DB(âœ…) Widget(âœ…)
âœ… Room DELETE: DB(âœ…) Widget(âœ…)
âœ… ChatMessage CREATE: DB(âœ…) Widget(âœ…)
âœ… ChatMessage UPDATE: DB(âœ…) Widget(âœ…)
âœ… ChatMessage DELETE: DB(âœ…) Widget(âœ…)

ğŸ“ˆ Results: 9/9 passed (100.0%)
ğŸ‰ ALL CRUD + DB + WIDGET TESTS PASSED!
âœ¨ Database persistence and Widget HTML synchronization working perfectly
